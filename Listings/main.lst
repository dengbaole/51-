C51 COMPILER V9.54   MAIN                                                                  11/02/2022 12:34:42 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\app\keil51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\user;D:\app\keil51\C51\INC\A
                    -tmel) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "delay.h"
   3          #include "task.h"
   4          #include "nixie.h"
   5          #include "timer.h"
   6          #include "uart.h"
   7          #include "matrixkey.h"
   8          #include "beep.h"
   9          //#include "log.h"
  10          
  11          
  12          
  13          void main()
  14          {
  15   1        unsigned char button;
  16   1        char ch = 1;
  17   1        unsigned char KeyNum;
  18   1        task_init();
  19   1        timer0_init();
  20   1        uart_init();   //波特率4800 8位无校验
  21   1        //printf("51_code version1.0.0\n");
  22   1        //EMlog(LOG_DEBUG,"HELLO\n");
  23   1      
  24   1        while(1)
  25   1        {
  26   2          //矩阵按键
  27   2          KeyNum = MatrixKey();
  28   2          if(KeyNum)
  29   2          {
  30   3            printf("Keynum = %d",KeyNum);
  31   3            Static_Nixie(8,KeyNum);
  32   3          }
  33   2      
  34   2          //独立按键
  35   2          button = key_state();
*** WARNING C206 IN LINE 35 OF main.c: 'key_state': missing function-prototype
  36   2          if(button)
  37   2          {
  38   3            //Static_Nixie(1,button);
  39   3            Buzzer_Time(100);
  40   3          }
  41   2          
  42   2      
  43   2          //接收并处理完数据就清除[55 ,AA,]
  44   2          if(recv_flag)
  45   2          {
  46   3            recv_flag = 0;
  47   3            //处理数据(判断不同数据长度进行不同的处理)
  48   3            switch (recv_buf[0])
  49   3            {
  50   4              case 1:
  51   4      
  52   4                break;
  53   4              case 2:
C51 COMPILER V9.54   MAIN                                                                  11/02/2022 12:34:42 PAGE 2   

  54   4                break;
  55   4              case 3:
  56   4              default:
  57   4                break;
  58   4            }
  59   3            UART_SendString(recv_buf);
  60   3            clr_recvbuffer(recv_buf);    //清空数据
  61   3          }
  62   2          fsmTask(ch);
  63   2        }
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     87    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
